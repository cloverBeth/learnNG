<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<link rel="stylesheet" href="../public/bootstrap-3.3.5-dist/css/bootstrap.min.css">
	<script src="../public/jquery/jquery-3.1.0.min.js"></script>
	<script src="../public/bootstrap-3.3.5-dist/js/bootstrap.min.js"></script>
	<title>多个表单创建demo</title>
</head>
<body>

<div class="process-record text-center row no-le-ma">
            <div class="process-con pull-left col-lg-4 col-xs-12 mt-15">
                <h4>待完成</h4>

                <foreach name="demand_list" item="de_list">
                    <if condition="$de_list.is_finish eq '0' ">
                    <div class="row pro-content mt-15">
                        <div class="pro-wrap col-md-12 col-xs-12">
                            <div class="pull-left">                 
                                <input type="checkbox" id="process1">
                                <label for="process1" >{$de_list.demand_name}</label>
                            </div>
                            <img src="/Public/img/head-log.jpg" width="30" height="30" class="img-circle pull-right mt-5" alt="">
                        </div>
                        
                    </div>
                    </if>
                </foreach>




                
                
                <div class="row public-task hidden mt-15 mb-15 no-le-ma">
                    <form action="/Task/process_dispose" method="post" class="form-horizonal">
                        <div class="form-group col-md-12 text-left">
                            <label for="task-title">任务标题</label>
                            <input class="form-control" name="task-title" id="task-title" placeholder="请填写任务标题" >
                        </div>
                        <div class="form-group col-md-12 text-left"> 
                            <label for="projects">所属项目</label>                           
                            <select name="projects" id="project_id" class="form-control">
                                <foreach name="projects_list" item="pro_list">
                                    <option value="{$pro_list.id}">{$pro_list.project_name}</option>
                                </foreach>
                                
                            </select>
                        </div>
                        <div class="form-group col-md-12 text-left"> 
                            <label for="department">所属部门</label>                           
                            <select name="department" id="department" class="form-control">
                                    <option value="0">前端</option>
                                    <option value="0">后端</option>
                                    <option value="0">UI</option>
                                    <option value="0">测试</option>
                                
                            </select>
                        </div>
                        <div class="form-group col-md-12 text-left"> 
                            <label for="members">指派给</label>                           
                            <select name="members" id="members" class="form-control">
                                <foreach name="user_list" item="u_list">
                                    <option value="{$u_list.id}">{$u_list.username}</option>
                                </foreach>
                                
                            </select>
                        </div>
                        <div class="form-group col-md-12 text-left border-top">
                            <span for="paticipate">参与者</span>
                            <a class="glyphicon glyphicon-question-sign" id="toolips"
                                 data-toggle="tooltip" trigger="hover" data-placement="right" 
                                 title="参与者将会收到评论和任务更新通知" >
                            </a> 

                            
                        </div>
    
                        <div class="form-group col-md-12 text-left border-top add-partner">                            
                            <img src="/Public/img/head-log.jpg" width="30" height="30" class="img-circle pull-left mr-5" alt="">
                            <a href="#" id="addCollgue" class="text-primary glyphicon glyphicon-plus-sign"></a>
                        </div>

                        <div class="form-group col-md-12 border-top">  
                                               
                               <div class="input-group date" data-provide="datepicker">
                                    
                                    <input id="startTime" name="startTime" placeholder="预计开始" class="datepicker form-control" data-date-format="yyyy/mm/dd">
                                    <div class="input-group-addon">
                                       至
                                    </div>
                                    <input id="endTime" name="endTime" placeholder="预计结束" class="datepicker form-control" data-date-format="yyyy/mm/dd">
                                </div>
                                <!-- <span class="glyphicon glyphicon-resize-vertical"></span> -->
                                
  
                        </div>

                        <div class="form-group col-md-12 text-left">
                        <label for="task-content">任务备注</label>
                            <textarea class="form-control" name="task-content" id="task-content" placeholder="任务备注" ></textarea>
                        </div>

                         <div class="form-group cancelbar">
                            <input type="submit" value="创建111" class="btn btn-primary">
                             <input type="button" value="取消" class="btn btn-default cancel-btn"  data-dismiss="public-task">
                        </div>
                    </form>
                    
                </div>
                 <a href="#"  class="add-btn" data-toggle="modal" data-target=".bs-example-modal-sm">
                    <div class="row pro-content mt-15">
                            <div class="pro-wrap row bg-info">
                               +添加任务
                            </div>
                    </div>
                 </a>
            </div>

            <div class="process-ing process-con pull-left col-lg-4 col-xs-12 mt-15">
                <h4>进行中</h4>
                <foreach name="demand_list" item="de_list">
                    <if condition="$de_list.is_finish eq '1' ">
                    <div class="row pro-content mt-15">
                        <div class="pro-wrap col-md-12 col-xs-12">
                            <div class="pull-left">                 
                                <input type="checkbox" id="process1">
                                <label for="process1" >{$de_list.demand_name}</label>
                            </div>
                            <img src="/Public/img/head-log.jpg" width="30" height="30" class="img-circle pull-right mt-5" alt="">
                        </div>
                        
                    </div>
                    </if>
                </foreach>
                <!-- <div class="row pro-content mt-15">
                    <div class="pro-wrap col-md-12 col-xs-12">
                        <div class="pull-left">                 
                            <input type="checkbox" id="process3">
                            <label for="process3" >UI页面设计</label>
                        </div>
                        <img src="/Public/img/head-log.jpg" width="30" height="30" class="img-circle pull-right mt-5" alt="">
                    </div>
                    
                </div> -->
                <!-- <div class="row pro-content mt-15">
                    <div class="pro-wrap col-md-12 col-xs-12">
                        <div class="pull-left">                 
                            <input type="checkbox" id="process4">
                            <label for="process4" >UI页面设计</label>
                        </div>
                        <img src="/Public/img/head-log.jpg" width="30" height="30" class="img-circle pull-right mt-5" alt="">
                    </div>
                    
                </div> -->
                <div class="row public-task hidden mt-15 mb-15 no-le-ma">
                    <form action="#" method="post" class="form-horizonal">
                        <div class="form-group col-md-12 text-left">
                            <label for="task-title">任务标题</label>
                            <input class="form-control" name="task-title" id="task-title" placeholder="请填写任务标题" >
                        </div>
                        <div class="form-group col-md-12 text-left"> 
                            <label for="members">指派给</label>                           
                            <select name="members" id="members" class="form-control">
                                <option value="0">成员1</option>
                                <option value="1">成员2</option>
                                <option value="2">成员3</option>
                                <option value="3">成员4</option>
                            </select>
                        </div>
                        <div class="form-group col-md-12 text-left border-top">
                            <span for="paticipate">参与者</span>
                            <a class="glyphicon glyphicon-question-sign" id="toolips"
                                 data-toggle="tooltip" trigger="hover" data-placement="right" 
                                 title="参与者将会收到评论和任务更新通知" >
                            </a> 

                            
                        </div>
    
                        <div class="form-group col-md-12 text-left border-top add-partner">                            
                            <img src="/Public/img/head-log.jpg" width="30" height="30" class="img-circle pull-left mr-5" alt="">
                            <a href="#" id="addCollgue" class="text-primary glyphicon glyphicon-plus-sign"></a>
                        </div>

                        <div class="form-group col-md-12 border-top">  
                                               
                               <div class="input-group date" data-provide="datepicker">
                                    
                                    <input id="startTime" name="startTime" placeholder="预计开始" class="datepicker form-control" data-date-format="mm/dd/yyyy">
                                    <div class="input-group-addon">
                                       至
                                    </div>
                                    <input id="endTime" name="endTime" placeholder="预计结束" class="datepicker form-control" data-date-format="mm/dd/yyyy">
                                </div>
                                <!-- <span class="glyphicon glyphicon-resize-vertical"></span> -->
                                
  
                        </div>

                        <div class="form-group col-md-12 text-left">
                        <label for="task-content">任务备注</label>
                            <textarea class="form-control" name="task-content" id="task-content" placeholder="任务备注" ></textarea>
                        </div>

                         <div class="form-group cancelbar">
                            <input type="submit" value="创建222" class="btn btn-primary">
                             <input type="button" value="取消" class="btn btn-default cancel-btn"  data-dismiss="public-task">
                        </div>
                    </form>
                    
                </div>
                 <a href="#"  class="add-btn" data-toggle="modal" data-target=".bs-example-modal-sm">
                    <div class="row pro-content mt-15">
                            <div class="pro-wrap row bg-info">
                               +添加任务
                            </div>
                    </div>
                 </a>
                
            </div>

            <div class="process-ed process-con pull-left col-lg-4 col-xs-12 mt-15">
                <h4>已完成</h4>
                <foreach name="demand_list" item="de_list">
                    <if condition="$de_list.is_finish eq '2' ">
                    <div class="row pro-content mt-15">
                        <div class="pro-wrap col-md-12 col-xs-12">
                            <div class="pull-left">                 
                                <input type="checkbox" id="process1">
                                <label for="process1" >{$de_list.demand_name}</label>
                            </div>
                            <img src="/Public/img/head-log.jpg" width="30" height="30" class="img-circle pull-right mt-5" alt="">
                        </div>
                        
                    </div>
                    </if>
                </foreach>
                 <!-- <div class="row pro-content mt-15">
                    <div class="pro-wrap col-md-12 col-xs-12">
                        <div class="pull-left">                 
                            <input type="checkbox" id="process5">
                            <label for="process5" >UI页面设计</label>
                        </div>
                        <img src="/Public/img/head-log.jpg" width="30" height="30" class="img-circle pull-right mt-5" alt="">
                    </div>
                    
                </div>
                <div class="row pro-content mt-15">
                    <div class="pro-wrap col-md-12 col-xs-12">
                        <div class="pull-left">                 
                            <input type="checkbox" id="process6">
                            <label for="process6" >UI页面设计</label>
                        </div>
                        <img src="/Public/img/head-log.jpg" width="30" height="30" class="img-circle pull-right mt-5" alt=""> 
                    </div>
                    
                </div> -->
                <div class="row public-task hidden mt-15 mb-15 no-le-ma">
                    <form action="#" method="post" class="form-horizonal">
                        <div class="form-group col-md-12 text-left">
                            <label for="task-title">任务标题</label>
                            <input class="form-control" name="task-title" id="task-title" placeholder="请填写任务标题" >
                        </div>
                        <div class="form-group col-md-12 text-left"> 
                            <label for="members">指派给</label>                           
                            <select name="members" id="members" class="form-control">
                                <option value="0">成员1</option>
                                <option value="1">成员2</option>
                                <option value="2">成员3</option>
                                <option value="3">成员4</option>
                            </select>
                        </div>
                        <div class="form-group col-md-12 text-left border-top">
                            <span for="paticipate">参与者</span>
                            <a class="glyphicon glyphicon-question-sign" id="toolips"
                                 data-toggle="tooltip" trigger="hover" data-placement="right" 
                                 title="参与者将会收到评论和任务更新通知" >
                            </a> 

                            
                        </div>
    
                        <div class="form-group col-md-12 text-left border-top add-partner">                            
                            <img src="/Public/img/head-log.jpg" width="30" height="30" class="img-circle pull-left mr-5" alt="">
                            <a href="#" id="addCollgue" class="text-primary glyphicon glyphicon-plus-sign"></a>
                        </div>

                        <div class="form-group col-md-12 border-top">  
                                               
                               <div class="input-group date" data-provide="datepicker">
                                    
                                    <input id="startTime" name="startTime" placeholder="预计开始" class="datepicker form-control" data-date-format="mm/dd/yyyy">
                                    <div class="input-group-addon">
                                       至
                                    </div>
                                    <input id="endTime" name="endTime" placeholder="预计结束" class="datepicker form-control" data-date-format="mm/dd/yyyy">
                                </div>
                                <!-- <span class="glyphicon glyphicon-resize-vertical"></span> -->
                                
  
                        </div>

                        <div class="form-group col-md-12 text-left">
                        <label for="task-content">任务备注</label>
                            <textarea class="form-control" name="task-content" id="task-content" placeholder="任务备注" ></textarea>
                        </div>

                         <div class="form-group cancelbar">
                            <input type="submit" value="创建333" class="btn btn-primary">
                             <input type="button" value="取消" class="btn btn-default cancel-btn"  data-dismiss="public-task">
                        </div>
                    </form>
                    
                </div>
                 <a href="#" class="add-btn" data-toggle="modal" data-target=".bs-example-modal-sm">
                    <div class="row pro-content mt-15">
                            <div class="pro-wrap row bg-info">
                               +添加任务
                            </div>
                    </div>
                 </a>
            </div>
            
        </div>

<script>
 $(function(){
    var toggleDis=function(){
            $(".add-btn").each(function(index,value){

                if($(this).siblings('.public-task').hasClass('hidden')){
                    var $parent=$(this);
                    $(this).click(function(){
                        $(this).siblings('.public-task').removeClass('hidden');
                        $(this).hide();
                        var $cancelbar=$(this).siblings('div.public-task').children().children('div.cancelbar').children('input.cancel-btn');
                       $cancelbar.each(function(index,value){

                            $(this).click(function(){
                                $parent.siblings('.public-task').addClass('hidden');
                                $parent.show();
                            });

                        });

                    });
                }else{
                   console.log('debug');
                }
                 
        });
    }
     toggleDis();

 });
	</script>
	
</body>
</html>